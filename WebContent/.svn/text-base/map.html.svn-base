<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>地图</title>
<script language="javascript" src="js/jquery-1.6.2.js" type="text/javascript"></script>
<script type="text/javascript" src="js/artDialog/artDialog.4.1.4.js?skin=default"></script>
<script type="text/javascript" src="js/artDialog/iframeTools.4.1.4.js"></script>
<script>
var mapArray = [
	[100,20,105,15,972,972,98],
	[100,25,105,20,972,971,85],
	[100,30,105,25,972,973,72],
	[100,35,105,30,972,972,59],
	[100,40,105,35,972,971,46],
	[100,45,105,40,972,973,33],
	[100,50,105,45,972,970,20],
	[100,55,105,50,972,974,7],
	[105,20,110,15,972,972,99],
	[105,25,110,20,972,971,86],
	[105,30,110,25,972,973,73],
	[105,35,110,30,972,972,60],
	[105,40,110,35,972,971,47],
	[105,45,110,40,972,973,34],
	[105,50,110,45,972,970,21],
	[105,55,110,50,972,974,8],
	[110,20,115,15,971,972,100],
	[110,25,115,20,971,971,87],
	[110,30,115,25,971,973,74],
	[110,35,115,30,971,972,61],
	[110,40,115,35,971,971,48],
	[110,45,115,40,971,973,35],
	[110,50,115,45,971,970,22],
	[110,55,115,50,971,974,9],
	[115,20,120,15,971,972,101],
	[115,25,120,20,971,971,88],
	[115,30,120,25,971,973,75],
	[115,35,120,30,971,972,62],
	[115,40,120,35,971,971,49],
	[115,45,120,40,971,973,36],
	[115,50,120,45,971,970,23],
	[115,55,120,50,971,974,10],
	[120,20,125,15,973,972,102],
	[120,25,125,20,973,971,89],
	[120,30,125,25,973,973,76],
	[120,35,125,30,973,972,63],
	[120,40,125,35,973,971,50],
	[120,45,125,40,973,973,37],
	[120,50,125,45,973,970,24],
	[120,55,125,50,973,974,11],
	[125,20,130,15,972,972,103],
	[125,25,130,20,972,971,90],
	[125,30,130,25,972,973,77],
	[125,35,130,30,972,972,64],
	[125,40,130,35,972,971,51],
	[125,45,130,40,972,973,38],
	[125,50,130,45,972,970,25],
	[125,55,130,50,972,974,12],
	[130,20,135,15,971,972,104],
	[130,25,135,20,971,971,91],
	[130,30,135,25,971,973,78],
	[130,35,135,30,971,972,65],
	[130,40,135,35,971,971,52],
	[130,45,135,40,971,973,39],
	[130,50,135,45,971,970,26],
	[130,55,135,50,971,974,13],
	[70,20,75,15,973,972,92],
	[70,25,75,20,973,971,79],
	[70,30,75,25,973,973,66],
	[70,35,75,30,973,972,53],
	[70,40,75,35,973,971,40],
	[70,45,75,40,973,973,27],
	[70,50,75,45,973,970,14],
	[70,55,75,50,973,974,1],
	[75,20,80,15,972,972,93],
	[75,25,80,20,972,971,80],
	[75,30,80,25,972,973,67],
	[75,35,80,30,972,972,54],
	[75,40,80,35,972,971,41],
	[75,45,80,40,972,973,28],
	[75,50,80,45,972,970,15],
	[75,55,80,50,972,974,2],
	[80,20,85,15,972,972,94],
	[80,25,85,20,972,971,81],
	[80,30,85,25,972,973,68],
	[80,35,85,30,972,972,55],
	[80,40,85,35,972,971,42],
	[80,45,85,40,972,973,29],
	[80,50,85,45,972,970,16],
	[80,55,85,50,972,974,3],
	[85,20,90,15,970,972,95],
	[85,25,90,20,970,971,82],
	[85,30,90,25,970,973,69],
	[85,35,90,30,970,972,56],
	[85,40,90,35,970,971,43],
	[85,45,90,40,970,973,30],
	[85,50,90,45,970,970,17],
	[85,55,90,50,970,974,4],
	[90,20,95,15,973,972,96],
	[90,25,95,20,973,971,83],
	[90,30,95,25,973,973,70],
	[90,35,95,30,973,972,57],
	[90,40,95,35,973,971,44],
	[90,45,95,40,973,973,31],
	[90,50,95,45,973,970,18],
	[90,55,95,50,973,974,5],
	[95,20,100,15,972,972,97],
	[95,25,100,20,972,971,84],
	[95,30,100,25,972,973,71],
	[95,35,100,30,972,972,58],
	[95,40,100,35,972,971,45],
	[95,45,100,40,972,973,32],
	[95,50,100,45,972,970,19],
	[95,55,100,50,972,974,6]
] ;
function showpoint() {
	var picwidth = 997; //图片宽度
    var picHeight = 502; //图片高度

	var N_left_top = 40; //左上角纬度
	var N_right_bottom = 30; //右下角纬度

	var E_left_top = 105; //左上角经度
	var E_right_bottom = 125; //右下角经度

	var x = art.dialog.data('y');
	var y = art.dialog.data('x');
	var mapName = "" ;
	
	for(var i = 0; i < mapArray.length; i ++ ){
		
		if(y >= mapArray[i][0] && y <= mapArray[i][2] && x <= mapArray[i][1] && x >= mapArray[i][3]){
			N_left_top = mapArray[i][1] ;
			N_right_bottom = mapArray[i][3] ;
			E_left_top = mapArray[i][0] ;
			E_right_bottom = mapArray[i][2] ;
			picwidth = mapArray[i][4];
			picHeight = mapArray[i][5];

			mapName = mapArray[i][0] + "-" + mapArray[i][1] + "-" + mapArray[i][2] + "-" + mapArray[i][3] + "-" + mapArray[i][4] + "-" + mapArray[i][5] + "-" + mapArray[i][6]  ;
			if(mapArray[i][6] == 0){
				mapName = mapName + ".png" ;
			}else {
				mapName = mapName + ".gif" ;
			}
		}
	}
	
	//$("#map_img").attr("src",art.dialog.data('contextPath') + "/map/"+mapName) ;
	var Img = new Image();
    Img.src = art.dialog.data('contextPath') + "/map/"+mapName;
    Img.onload = function () {
    	$("#map").append(Img);
    }
	
	var theBody;
	var div;

	x = picHeight * (N_left_top - x) / (N_left_top - N_right_bottom) - 4; //4为Point_Div层宽的一半
    y = picwidth * (y - E_left_top) / (E_right_bottom - E_left_top) - 4; //4为Point_Div层高的一半
    theBody = document.body;
    div = document.createElement("div");
    div.id = "Point_Div";
    div.style.position = "absolute";
    div.style.background = "url(map/markers_new.png) -66px 176px" ;
    div.style.padding = "0px 0px 0px 0px";
    div.style.margin = x + "px 0px 0px " + y + "px";
    div.style.overflow = "hidden";
    div.style.zIndex = 1;
    div.style.width = 32;
    div.style.height = 32;
    theBody.appendChild(div);
}
</script>
</head>
<body onload="showpoint();">
    <div id="map" style="padding: 0px 0px 0px 0px; position: absolute; z-index: 0; padding-top: 0px"><img src="" alt="" ></div>
</body>
</html>
